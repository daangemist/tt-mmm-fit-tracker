var Qe=Object.defineProperty;var $e=(t,e,n)=>e in t?Qe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ae=(t,e,n)=>($e(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();class J extends Error{constructor(e,n){super(n),this.status=e,this.statusText=n}}function Ge(t){return{weight:t.weight,when:new Date(t.when)}}const Ve="https:/www.datasthor.com/data",Je="https://www.datasthor.com/api/data/v1";async function he(t,e,n,r){const a={};n&&(a.Authorization=`Bearer ${n}`);const i=await fetch(`${Ve}/${t}/${e}/${r}`,{headers:a});if(!i.ok)throw new J(i.status,i.statusText);return await i.json()}async function Ue(t,e,n,r,a){const i={};n&&(i.Authorization=`Bearer ${n}`);const o=await fetch(`${Je}/${t}/${e}/${r}`,{method:"POST",headers:{...i,"Content-Type":"application/json"},body:JSON.stringify(a)});if(!o.ok)throw new J(o.status,o.statusText)}function ie(t){return t.startsWith("/")?t.slice(1):t}const Fe=t=>({getWeight:async()=>{try{const{namespace:e,prefix:n,apiKey:r}=t.datasthor,a=await he(e,ie(n),r,"weight.json");return a[0]?Ge(a[0]):null}catch(e){if(e instanceof J&&e.status===404)return null;throw e}},storeWeight:async(e,n)=>{let r=[];const{namespace:a,prefix:i,apiKey:o}=t.datasthor;try{r=await he(a,ie(i),o,"weight.json")}catch(s){if(!(s instanceof J)||s.status!==404)throw s}return await Ue(a,ie(i),o,"weight.json",[{weight:e,when:n.toISOString()},...r]),{weight:e,when:n}}});function S(){}function Ne(t){return t()}function me(){return Object.create(null)}function L(t){t.forEach(Ne)}function Ce(t){return typeof t=="function"}function Z(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function ze(t){return Object.keys(t).length===0}function U(t){return t??""}function k(t,e){t.appendChild(e)}function p(t,e,n){t.insertBefore(e,n||null)}function _(t){t.parentNode&&t.parentNode.removeChild(t)}function D(t){return document.createElement(t)}function q(t){return document.createTextNode(t)}function P(){return q(" ")}function Ae(){return q("")}function z(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function Ke(t){return function(e){return e.preventDefault(),t.call(this,e)}}function M(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Ze(t){return Array.from(t.childNodes)}function oe(t,e){e=""+e,t.data!==e&&(t.data=e)}function ge(t,e){t.value=e??""}function et(t,e,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:r})}let B;function R(t){B=t}function le(){if(!B)throw new Error("Function called outside component initialization");return B}function tt(t){le().$$.on_mount.push(t)}function nt(t){le().$$.on_destroy.push(t)}function rt(){const t=le();return(e,n,{cancelable:r=!1}={})=>{const a=t.$$.callbacks[e];if(a){const i=et(e,n,{cancelable:r});return a.slice().forEach(o=>{o.call(t,i)}),!i.defaultPrevented}return!0}}const A=[],we=[];let j=[];const ye=[],at=Promise.resolve();let ce=!1;function it(){ce||(ce=!0,at.then(qe))}function fe(t){j.push(t)}const se=new Set;let N=0;function qe(){if(N!==0)return;const t=B;do{try{for(;N<A.length;){const e=A[N];N++,R(e),ot(e.$$)}}catch(e){throw A.length=0,N=0,e}for(R(null),A.length=0,N=0;we.length;)we.pop()();for(let e=0;e<j.length;e+=1){const n=j[e];se.has(n)||(se.add(n),n())}j.length=0}while(A.length);for(;ye.length;)ye.pop()();ce=!1,se.clear(),R(t)}function ot(t){if(t.fragment!==null){t.update(),L(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(fe)}}function st(t){const e=[],n=[];j.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),j=e}const V=new Set;let E;function be(){E={r:0,c:[],p:E}}function _e(){E.r||L(E.c),E=E.p}function v(t,e){t&&t.i&&(V.delete(t),t.i(e))}function F(t,e,n,r){if(t&&t.o){if(V.has(t))return;V.add(t),E.c.push(()=>{V.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function de(t){t&&t.c()}function ee(t,e,n){const{fragment:r,after_update:a}=t.$$;r&&r.m(e,n),fe(()=>{const i=t.$$.on_mount.map(Ne).filter(Ce);t.$$.on_destroy?t.$$.on_destroy.push(...i):L(i),t.$$.on_mount=[]}),a.forEach(fe)}function te(t,e){const n=t.$$;n.fragment!==null&&(st(n.after_update),L(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ut(t,e){t.$$.dirty[0]===-1&&(A.push(t),it(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ne(t,e,n,r,a,i,o=null,s=[-1]){const c=B;R(t);const u=t.$$={fragment:null,ctx:[],props:i,update:S,not_equal:a,bound:me(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:me(),dirty:s,skip_bound:!1,root:e.target||c.$$.root};o&&o(u.root);let f=!1;if(u.ctx=n?n(t,e.props||{},(l,g,...h)=>{const w=h.length?h[0]:g;return u.ctx&&a(u.ctx[l],u.ctx[l]=w)&&(!u.skip_bound&&u.bound[l]&&u.bound[l](w),f&&ut(t,l)),g}):[],u.update(),f=!0,L(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){const l=Ze(e.target);u.fragment&&u.fragment.l(l),l.forEach(_)}else u.fragment&&u.fragment.c();e.intro&&v(t.$$.fragment),ee(t,e.target,e.anchor),qe()}R(c)}class re{constructor(){ae(this,"$$");ae(this,"$$set")}$destroy(){te(this,1),this.$destroy=S}$on(e,n){if(!Ce(n))return S;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const a=r.indexOf(n);a!==-1&&r.splice(a,1)}}$set(e){this.$$set&&!ze(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const ct="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ct);function pe(t){let e;return{c(){e=D("button"),e.textContent="Add weight",M(e,"type","submit")},m(n,r){p(n,e,r)},d(n){n&&_(e)}}}function ft(t){let e,n,r,a,i,o=t[0]&&pe();return{c(){e=D("form"),n=D("input"),r=P(),o&&o.c(),n.autofocus=!0,M(n,"type","text"),M(n,"placeholder","Enter your weight.")},m(s,c){p(s,e,c),k(e,n),ge(n,t[1]),k(e,r),o&&o.m(e,null),n.focus(),a||(i=[z(n,"input",t[4]),z(e,"submit",Ke(t[2]))],a=!0)},p(s,[c]){c&2&&n.value!==s[1]&&ge(n,s[1]),s[0]?o||(o=pe(),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},i:S,o:S,d(s){s&&_(e),o&&o.d(),a=!1,L(i)}}}function lt(t,e,n){let{storage:r}=e,{showSubmit:a=!1}=e,i;const o=rt();async function s(){const u=parseFloat(i);if(isNaN(u)){alert("Please enter a valid weight.");return}const f=await r.storeWeight(u,new Date);n(1,i=""),o("weightAdded",{weight:f})}function c(){i=this.value,n(1,i)}return t.$$set=u=>{"storage"in u&&n(3,r=u.storage),"showSubmit"in u&&n(0,a=u.showSubmit)},[a,i,s,r,c]}class je extends re{constructor(e){super(),ne(this,e,lt,ft,Z,{storage:3,showSubmit:0})}}function ke(t){let e;return{c(){e=D("p"),e.textContent="Weight stored!"},m(n,r){p(n,e,r)},d(n){n&&_(e)}}}function dt(t){let e,n,r,a,i,o;r=new je({props:{storage:t[0],showSubmit:!0}}),r.$on("weightAdded",t[2]);let s=t[1]&&ke();return{c(){e=D("h1"),e.textContent="Fit Tracker form",n=P(),de(r.$$.fragment),a=P(),s&&s.c(),i=Ae()},m(c,u){p(c,e,u),p(c,n,u),ee(r,c,u),p(c,a,u),s&&s.m(c,u),p(c,i,u),o=!0},p(c,[u]){const f={};u&1&&(f.storage=c[0]),r.$set(f),c[1]?s||(s=ke(),s.c(),s.m(i.parentNode,i)):s&&(s.d(1),s=null)},i(c){o||(v(r.$$.fragment,c),o=!0)},o(c){F(r.$$.fragment,c),o=!1},d(c){c&&(_(e),_(n),_(a),_(i)),te(r,c),s&&s.d(c)}}}function ht(t,e,n){let r=!1,{storage:a}=e;function i(){n(1,r=!0)}return t.$$set=o=>{"storage"in o&&n(0,a=o.storage)},[a,r,i]}class mt extends re{constructor(e){super(),ne(this,e,ht,dt,Z,{storage:0})}}function gt(){const t=config.modules.find(r=>r.module==="tt-mmm-fit-tracker"),e=document.querySelector("#app");if(!e){console.log("Unable to find Magic Mirror Fit Tracker app container.");return}if(!t){e.innerHTML="Unable to find Magic Mirror storage configuration.";return}const n=Fe(t.config);new mt({target:e,props:{storage:n}})}async function De(t){return await t.getWeight()}function O(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof e=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function W(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function wt(t,e){const n=O(t);return isNaN(e)?W(t,NaN):(e&&n.setDate(n.getDate()+e),n)}function yt(t,e){const n=O(t);if(isNaN(e))return W(t,NaN);if(!e)return n;const r=n.getDate(),a=W(t,n.getTime());a.setMonth(n.getMonth()+e+1,0);const i=a.getDate();return r>=i?a:(n.setFullYear(a.getFullYear(),a.getMonth(),r),n)}function bt(t,e){const{years:n=0,months:r=0,weeks:a=0,days:i=0,hours:o=0,minutes:s=0,seconds:c=0}=e,u=O(t),f=r||n?yt(u,r+n*12):u,l=i||a?wt(f,i+a*7):f,g=s+o*60,w=(c+g*60)*1e3;return W(t,l.getTime()+w)}const Le=6048e5,_t=864e5;let pt={};function Q(){return pt}function X(t,e){var s,c,u,f;const n=Q(),r=(e==null?void 0:e.weekStartsOn)??((c=(s=e==null?void 0:e.locale)==null?void 0:s.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((f=(u=n.locale)==null?void 0:u.options)==null?void 0:f.weekStartsOn)??0,a=O(t),i=a.getDay(),o=(i<r?7:0)+i-r;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function K(t){return X(t,{weekStartsOn:1})}function Ie(t){const e=O(t),n=e.getFullYear(),r=W(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const a=K(r),i=W(t,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const o=K(i);return e.getTime()>=a.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function Oe(t){const e=O(t);return e.setHours(0,0,0,0),e}function Me(t){const e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function He(t,e){const n=Oe(t),r=Oe(e),a=n.getTime()-Me(n),i=r.getTime()-Me(r);return Math.round((a-i)/_t)}function kt(t){const e=Ie(t),n=W(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),K(n)}function Dt(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Ot(t){if(!Dt(t)&&typeof t!="number")return!1;const e=O(t);return!isNaN(Number(e))}function Mt(t){const e=O(t),n=W(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}const Pt={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Wt=(t,e,n)=>{let r;const a=Pt[t];return typeof a=="string"?r=a:e===1?r=a.one:r=a.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function ue(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const vt={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},St={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},xt={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Tt={date:ue({formats:vt,defaultWidth:"full"}),time:ue({formats:St,defaultWidth:"full"}),dateTime:ue({formats:xt,defaultWidth:"full"})},Yt={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Et=(t,e,n,r)=>Yt[t];function I(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let a;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,s=n!=null&&n.width?String(n.width):o;a=t.formattingValues[s]||t.formattingValues[o]}else{const o=t.defaultWidth,s=n!=null&&n.width?String(n.width):t.defaultWidth;a=t.values[s]||t.values[o]}const i=t.argumentCallback?t.argumentCallback(e):e;return a[i]}}const Ft={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Nt={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Ct={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},At={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},qt={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},jt={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Lt=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},It={ordinalNumber:Lt,era:I({values:Ft,defaultWidth:"wide"}),quarter:I({values:Nt,defaultWidth:"wide",argumentCallback:t=>t-1}),month:I({values:Ct,defaultWidth:"wide"}),day:I({values:At,defaultWidth:"wide"}),dayPeriod:I({values:qt,defaultWidth:"wide",formattingValues:jt,defaultFormattingWidth:"wide"})};function H(t){return(e,n={})=>{const r=n.width,a=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(a);if(!i)return null;const o=i[0],s=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(s)?Rt(s,l=>l.test(o)):Ht(s,l=>l.test(o));let u;u=t.valueCallback?t.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const f=e.slice(o.length);return{value:u,rest:f}}}function Ht(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function Rt(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function Bt(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const a=r[0],i=e.match(t.parsePattern);if(!i)return null;let o=t.valueCallback?t.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const s=e.slice(a.length);return{value:o,rest:s}}}const Xt=/^(\d+)(th|st|nd|rd)?/i,Qt=/\d+/i,$t={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Gt={any:[/^b/i,/^(a|c)/i]},Vt={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Jt={any:[/1/i,/2/i,/3/i,/4/i]},Ut={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},zt={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Kt={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Zt={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},en={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},tn={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},nn={ordinalNumber:Bt({matchPattern:Xt,parsePattern:Qt,valueCallback:t=>parseInt(t,10)}),era:H({matchPatterns:$t,defaultMatchWidth:"wide",parsePatterns:Gt,defaultParseWidth:"any"}),quarter:H({matchPatterns:Vt,defaultMatchWidth:"wide",parsePatterns:Jt,defaultParseWidth:"any",valueCallback:t=>t+1}),month:H({matchPatterns:Ut,defaultMatchWidth:"wide",parsePatterns:zt,defaultParseWidth:"any"}),day:H({matchPatterns:Kt,defaultMatchWidth:"wide",parsePatterns:Zt,defaultParseWidth:"any"}),dayPeriod:H({matchPatterns:en,defaultMatchWidth:"any",parsePatterns:tn,defaultParseWidth:"any"})},Re={code:"en-US",formatDistance:Wt,formatLong:Tt,formatRelative:Et,localize:It,match:nn,options:{weekStartsOn:0,firstWeekContainsDate:1}};function rn(t){const e=O(t);return He(e,Mt(e))+1}function an(t){const e=O(t),n=K(e).getTime()-kt(e).getTime();return Math.round(n/Le)+1}function Be(t,e){var f,l,g,h;const n=O(t),r=n.getFullYear(),a=Q(),i=(e==null?void 0:e.firstWeekContainsDate)??((l=(f=e==null?void 0:e.locale)==null?void 0:f.options)==null?void 0:l.firstWeekContainsDate)??a.firstWeekContainsDate??((h=(g=a.locale)==null?void 0:g.options)==null?void 0:h.firstWeekContainsDate)??1,o=W(t,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const s=X(o,e),c=W(t,0);c.setFullYear(r,0,i),c.setHours(0,0,0,0);const u=X(c,e);return n.getTime()>=s.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function on(t,e){var s,c,u,f;const n=Q(),r=(e==null?void 0:e.firstWeekContainsDate)??((c=(s=e==null?void 0:e.locale)==null?void 0:s.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(u=n.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??1,a=Be(t,e),i=W(t,0);return i.setFullYear(a,0,r),i.setHours(0,0,0,0),X(i,e)}function sn(t,e){const n=O(t),r=X(n,e).getTime()-on(n,e).getTime();return Math.round(r/Le)+1}function y(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const T={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return y(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):y(n+1,2)},d(t,e){return y(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return y(t.getHours()%12||12,e.length)},H(t,e){return y(t.getHours(),e.length)},m(t,e){return y(t.getMinutes(),e.length)},s(t,e){return y(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),a=Math.floor(r*Math.pow(10,n-3));return y(a,e.length)}},C={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},un={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return T.y(t,e)},Y:function(t,e,n,r){const a=Be(t,r),i=a>0?a:1-a;if(e==="YY"){const o=i%100;return y(o,2)}return e==="Yo"?n.ordinalNumber(i,{unit:"year"}):y(i,e.length)},R:function(t,e){const n=Ie(t);return y(n,e.length)},u:function(t,e){const n=t.getFullYear();return y(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return y(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return y(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return T.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return y(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const a=sn(t,r);return e==="wo"?n.ordinalNumber(a,{unit:"week"}):y(a,e.length)},I:function(t,e,n){const r=an(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):y(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):T.d(t,e)},D:function(t,e,n){const r=rn(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):y(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const a=t.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return y(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const a=t.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return y(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),a=r===0?7:r;switch(e){case"i":return String(a);case"ii":return y(a,e.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const a=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let a;switch(r===12?a=C.noon:r===0?a=C.midnight:a=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let a;switch(r>=17?a=C.evening:r>=12?a=C.afternoon:r>=4?a=C.morning:a=C.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return T.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):T.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):y(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):y(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):T.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):T.s(t,e)},S:function(t,e){return T.S(t,e)},X:function(t,e,n,r){const i=(r._originalDate||t).getTimezoneOffset();if(i===0)return"Z";switch(e){case"X":return We(i);case"XXXX":case"XX":return Y(i);case"XXXXX":case"XXX":default:return Y(i,":")}},x:function(t,e,n,r){const i=(r._originalDate||t).getTimezoneOffset();switch(e){case"x":return We(i);case"xxxx":case"xx":return Y(i);case"xxxxx":case"xxx":default:return Y(i,":")}},O:function(t,e,n,r){const i=(r._originalDate||t).getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Pe(i,":");case"OOOO":default:return"GMT"+Y(i,":")}},z:function(t,e,n,r){const i=(r._originalDate||t).getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Pe(i,":");case"zzzz":default:return"GMT"+Y(i,":")}},t:function(t,e,n,r){const a=r._originalDate||t,i=Math.floor(a.getTime()/1e3);return y(i,e.length)},T:function(t,e,n,r){const i=(r._originalDate||t).getTime();return y(i,e.length)}};function Pe(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),a=Math.floor(r/60),i=r%60;return i===0?n+String(a):n+String(a)+e+y(i,2)}function We(t,e){return t%60===0?(t>0?"-":"+")+y(Math.abs(t)/60,2):Y(t,e)}function Y(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),a=y(Math.floor(r/60),2),i=y(r%60,2);return n+a+e+i}const ve=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Xe=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},cn=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return ve(t,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",ve(r,e)).replace("{{time}}",Xe(a,e))},fn={p:Xe,P:cn},ln=["D","DD"],dn=["YY","YYYY"];function hn(t){return ln.indexOf(t)!==-1}function mn(t){return dn.indexOf(t)!==-1}function Se(t,e,n){if(t==="YYYY")throw new RangeError(`Use \`yyyy\` instead of \`YYYY\` (in \`${e}\`) for formatting years to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`);if(t==="YY")throw new RangeError(`Use \`yy\` instead of \`YY\` (in \`${e}\`) for formatting years to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`);if(t==="D")throw new RangeError(`Use \`d\` instead of \`D\` (in \`${e}\`) for formatting days of the month to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`);if(t==="DD")throw new RangeError(`Use \`dd\` instead of \`DD\` (in \`${e}\`) for formatting days of the month to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`)}const gn=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,wn=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,yn=/^'([^]*?)'?$/,bn=/''/g,_n=/[a-zA-Z]/;function pn(t,e,n){var f,l,g,h,w,d,b,$;const r=Q(),a=(n==null?void 0:n.locale)??r.locale??Re,i=(n==null?void 0:n.firstWeekContainsDate)??((l=(f=n==null?void 0:n.locale)==null?void 0:f.options)==null?void 0:l.firstWeekContainsDate)??r.firstWeekContainsDate??((h=(g=r.locale)==null?void 0:g.options)==null?void 0:h.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((d=(w=n==null?void 0:n.locale)==null?void 0:w.options)==null?void 0:d.weekStartsOn)??r.weekStartsOn??(($=(b=r.locale)==null?void 0:b.options)==null?void 0:$.weekStartsOn)??0,s=O(t);if(!Ot(s))throw new RangeError("Invalid time value");const c={firstWeekContainsDate:i,weekStartsOn:o,locale:a,_originalDate:s};return e.match(wn).map(function(m){const x=m[0];if(x==="p"||x==="P"){const G=fn[x];return G(m,a.formatLong)}return m}).join("").match(gn).map(function(m){if(m==="''")return"'";const x=m[0];if(x==="'")return kn(m);const G=un[x];if(G)return!(n!=null&&n.useAdditionalWeekYearTokens)&&mn(m)&&Se(m,e,String(t)),!(n!=null&&n.useAdditionalDayOfYearTokens)&&hn(m)&&Se(m,e,String(t)),G(s,m,a.localize,c);if(x.match(_n))throw new RangeError("Format string contains an unescaped latin alphabet character `"+x+"`");return m}).join("")}function kn(t){const e=t.match(yn);return e?e[1].replace(bn,"'"):t}function xe(t,e,n){var l,g,h,w;const r=O(t),a=O(e),i=Q(),o=(n==null?void 0:n.locale)??i.locale??Re,s=(n==null?void 0:n.weekStartsOn)??((g=(l=n==null?void 0:n.locale)==null?void 0:l.options)==null?void 0:g.weekStartsOn)??i.weekStartsOn??((w=(h=i.locale)==null?void 0:h.options)==null?void 0:w.weekStartsOn)??0,c=He(r,a);if(isNaN(c))throw new RangeError("Invalid time value");let u;c<-6?u="other":c<-1?u="lastWeek":c<0?u="yesterday":c<1?u="today":c<2?u="tomorrow":c<7?u="nextWeek":u="other";const f=o.formatRelative(u,r,a,{locale:o,weekStartsOn:s});return pn(r,f,{locale:o,weekStartsOn:s})}function Dn(t){let e,n,r,a,i,o,s,c,u;return{c(){e=D("div"),n=D("h1"),n.textContent="Your screen is currently disabled.",r=P(),a=D("h2"),a.innerHTML='Please enter your missing weight at <a href="/fit-tracker">/fit-tracker</a>',i=P(),o=D("button"),o.textContent="Temporarily Allow",M(e,"class",s=U(`full-screen ${t[0]?"hidden":""}`)+" svelte-1qi13p1")},m(f,l){p(f,e,l),k(e,n),k(e,r),k(e,a),k(e,i),k(e,o),c||(u=z(o,"click",t[1]),c=!0)},p(f,[l]){l&1&&s!==(s=U(`full-screen ${f[0]?"hidden":""}`)+" svelte-1qi13p1")&&M(e,"class",s)},i:S,o:S,d(f){f&&_(e),c=!1,u()}}}function On(t,e,n){let r=!1;function a(){n(0,r=!0),setTimeout(()=>{n(0,r=!1)},5e3)}return[r,a]}class Mn extends re{constructor(e){super(),ne(this,e,On,Dn,Z,{})}}function Pn(t){let e,n,r=t[3].weight.toLocaleString(void 0,{maximumFractionDigits:1})+"",a,i,o,s,c,u,f,l=xe(t[3].when,new Date)+"",g,h,w;return{c(){e=D("p"),n=q("Weight: "),a=q(r),i=P(),o=q(t[1]),s=P(),c=D("br"),u=P(),f=D("span"),g=q(l),M(f,"class","smallest svelte-1ktuyvj"),M(f,"title",h=t[3].when.toLocaleString()),M(e,"class",w=U(t[6]?"alert":"")+" svelte-1ktuyvj")},m(d,b){p(d,e,b),k(e,n),k(e,a),k(e,i),k(e,o),k(e,s),k(e,c),k(e,u),k(e,f),k(f,g)},p(d,b){b&8&&r!==(r=d[3].weight.toLocaleString(void 0,{maximumFractionDigits:1})+"")&&oe(a,r),b&2&&oe(o,d[1]),b&8&&l!==(l=xe(d[3].when,new Date)+"")&&oe(g,l),b&8&&h!==(h=d[3].when.toLocaleString())&&M(f,"title",h),b&64&&w!==(w=U(d[6]?"alert":"")+" svelte-1ktuyvj")&&M(e,"class",w)},d(d){d&&_(e)}}}function Wn(t){let e,n,r;return{c(){e=D("p"),e.textContent="There is no weight available.",n=P(),r=D("p"),r.textContent="Click to enter your weight.",M(r,"class","small svelte-1ktuyvj")},m(a,i){p(a,e,i),p(a,n,i),p(a,r,i)},p:S,d(a){a&&(_(e),_(n),_(r))}}}function vn(t){let e;return{c(){e=D("p"),e.textContent="Fetching weight..."},m(n,r){p(n,e,r)},p:S,d(n){n&&_(e)}}}function Te(t){let e;return{c(){e=D("p"),e.textContent="There was an error fetching the weight.",M(e,"class","small svelte-1ktuyvj")},m(n,r){p(n,e,r)},d(n){n&&_(e)}}}function Ye(t){let e,n;return e=new je({props:{storage:t[0]}}),e.$on("weightAdded",t[7]),{c(){de(e.$$.fragment)},m(r,a){ee(e,r,a),n=!0},p(r,a){const i={};a&1&&(i.storage=r[0]),e.$set(i)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){F(e.$$.fragment,r),n=!1},d(r){te(e,r)}}}function Ee(t){let e,n;return e=new Mn({}),{c(){de(e.$$.fragment)},m(r,a){ee(e,r,a),n=!0},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){F(e.$$.fragment,r),n=!1},d(r){te(e,r)}}}function Sn(t){let e,n,r,a,i,o,s,c;function u(d,b){return d[3]===void 0?vn:d[3]===null?Wn:Pn}let f=u(t),l=f(t),g=t[4]&&Te(),h=t[5]&&Ye(t),w=t[2]&&t[6]&&Ee();return{c(){e=D("div"),l.c(),n=P(),g&&g.c(),r=P(),h&&h.c(),a=P(),w&&w.c(),i=Ae()},m(d,b){p(d,e,b),l.m(e,null),k(e,n),g&&g.m(e,null),p(d,r,b),h&&h.m(d,b),p(d,a,b),w&&w.m(d,b),p(d,i,b),o=!0,s||(c=z(e,"click",t[11]),s=!0)},p(d,[b]){f===(f=u(d))&&l?l.p(d,b):(l.d(1),l=f(d),l&&(l.c(),l.m(e,n))),d[4]?g||(g=Te(),g.c(),g.m(e,null)):g&&(g.d(1),g=null),d[5]?h?(h.p(d,b),b&32&&v(h,1)):(h=Ye(d),h.c(),v(h,1),h.m(a.parentNode,a)):h&&(be(),F(h,1,1,()=>{h=null}),_e()),d[2]&&d[6]?w?b&68&&v(w,1):(w=Ee(),w.c(),v(w,1),w.m(i.parentNode,i)):w&&(be(),F(w,1,1,()=>{w=null}),_e())},i(d){o||(v(h),v(w),o=!0)},o(d){F(h),F(w),o=!1},d(d){d&&(_(e),_(r),_(a),_(i)),l.d(),g&&g.d(),h&&h.d(d),w&&w.d(d),s=!1,c()}}}function xn(t,e,n){let{storage:r}=e,{notifier:a}=e,{updateInterval:i=6e5}=e,{unit:o="kg"}=e,{maxWeightAge:s=24*60}=e,{disableScreen:c=!0}=e,u,f,l,g=!1,h=!1,w=!1;async function d(m){h||bt(m.when,{minutes:s})>new Date||(n(6,h=!0),w||(w=!0,await a.notify("Fit Tracker: Your weight is outdated.","Please weigh yourself and enter a new weight.")))}tt(()=>{u=window.setInterval(()=>{De(r).then(m=>{n(3,f=m),n(4,l=!1),m!==null&&d(m)}).catch(()=>n(4,l=!0))},i),De(r).then(m=>{n(3,f=m),n(4,l=!1),m!==null&&d(m)}).catch(()=>n(4,l=!0))}),nt(()=>{clearInterval(u)});function b(m){n(3,f=m.detail.weight),n(5,g=!1)}const $=()=>n(5,g=!g);return t.$$set=m=>{"storage"in m&&n(0,r=m.storage),"notifier"in m&&n(8,a=m.notifier),"updateInterval"in m&&n(9,i=m.updateInterval),"unit"in m&&n(1,o=m.unit),"maxWeightAge"in m&&n(10,s=m.maxWeightAge),"disableScreen"in m&&n(2,c=m.disableScreen)},[r,o,c,f,l,g,h,b,a,i,s,$]}class Tn extends re{constructor(e){super(),ne(this,e,xn,Sn,Z,{storage:0,notifier:8,updateInterval:9,unit:1,maxWeightAge:10,disableScreen:2})}}const Yn=(t,e,n)=>{var i;const r=Fe(e),a={notify:async(o,s)=>{e.pushBullet&&n("NOTIFY",{title:o,message:s,pushBullet:e.pushBullet})}};new Tn({target:t,props:{storage:r,notifier:a,maxWeightAge:((i=e.weight)==null?void 0:i.maxAge)??24*60,...e}})};window.mmmFitTracker={initialize:Yn};window.location.pathname==="/fit-tracker"&&gt();
//# sourceMappingURL=mmm-fit-tracker.js.map
