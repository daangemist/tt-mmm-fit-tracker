var Rt=Object.defineProperty;var Bt=(e,t,n)=>t in e?Rt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var z=(e,t,n)=>(Bt(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();class V extends Error{constructor(t,n){super(n),this.status=t,this.statusText=n}}function Xt(e){return{weight:e.weight,when:new Date(e.when)}}const Qt="https:/www.datasthor.com/data",Gt="https://www.datasthor.com/api/data/v1";async function dt(e,t,n,r){const a={};n&&(a.Authorization=`Bearer ${n}`);const i=await fetch(`${Qt}/${e}/${t}/${r}`,{headers:a});if(!i.ok)throw new V(i.status,i.statusText);return await i.json()}async function $t(e,t,n,r,a){const i={};n&&(i.Authorization=`Bearer ${n}`);const o=await fetch(`${Gt}/${e}/${t}/${r}`,{method:"POST",headers:{...i,"Content-Type":"application/json"},body:JSON.stringify(a)});if(!o.ok)throw new V(o.status,o.statusText)}function K(e){return e.startsWith("/")?e.slice(1):e}const St=e=>({getWeight:async()=>{try{const{namespace:t,prefix:n,apiKey:r}=e.datasthor,a=await dt(t,K(n),r,"weight.json");return a[0]?Xt(a[0]):null}catch(t){if(t instanceof V&&t.status===404)return null;throw t}},storeWeight:async(t,n)=>{let r=[];const{namespace:a,prefix:i,apiKey:o}=e.datasthor;try{r=await dt(a,K(i),o,"weight.json")}catch(u){if(!(u instanceof V)||u.status!==404)throw u}return await $t(a,K(i),o,"weight.json",[{weight:t,when:n.toISOString()},...r]),{weight:t,when:n}}});function E(){}function Tt(e){return e()}function lt(){return Object.create(null)}function L(e){e.forEach(Tt)}function Yt(e){return typeof e=="function"}function it(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Vt(e){return Object.keys(e).length===0}function ht(e){return e??""}function M(e,t){e.appendChild(t)}function b(e,t,n){e.insertBefore(t,n||null)}function y(e){e.parentNode&&e.parentNode.removeChild(e)}function D(e){return document.createElement(e)}function A(e){return document.createTextNode(e)}function v(){return A(" ")}function Et(){return A("")}function nt(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function Jt(e){return function(t){return t.preventDefault(),e.call(this,t)}}function P(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Ut(e){return Array.from(e.childNodes)}function Z(e,t){t=""+t,e.data!==t&&(e.data=t)}function mt(e,t){e.value=t??""}function zt(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}let B;function R(e){B=e}function ot(){if(!B)throw new Error("Function called outside component initialization");return B}function Kt(e){ot().$$.on_mount.push(e)}function Zt(e){ot().$$.on_destroy.push(e)}function te(){const e=ot();return(t,n,{cancelable:r=!1}={})=>{const a=e.$$.callbacks[t];if(a){const i=zt(t,n,{cancelable:r});return a.slice().forEach(o=>{o.call(e,i)}),!i.defaultPrevented}return!0}}const C=[],gt=[];let q=[];const wt=[],ee=Promise.resolve();let rt=!1;function ne(){rt||(rt=!0,ee.then(Ft))}function at(e){q.push(e)}const tt=new Set;let F=0;function Ft(){if(F!==0)return;const e=B;do{try{for(;F<C.length;){const t=C[F];F++,R(t),re(t.$$)}}catch(t){throw C.length=0,F=0,t}for(R(null),C.length=0,F=0;gt.length;)gt.pop()();for(let t=0;t<q.length;t+=1){const n=q[t];tt.has(n)||(tt.add(n),n())}q.length=0}while(C.length);for(;wt.length;)wt.pop()();rt=!1,tt.clear(),R(e)}function re(e){if(e.fragment!==null){e.update(),L(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(at)}}function ae(e){const t=[],n=[];q.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),q=t}const $=new Set;let Y;function ie(){Y={r:0,c:[],p:Y}}function oe(){Y.r||L(Y.c),Y=Y.p}function j(e,t){e&&e.i&&($.delete(e),e.i(t))}function J(e,t,n,r){if(e&&e.o){if($.has(e))return;$.add(e),Y.c.push(()=>{$.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function Nt(e){e&&e.c()}function st(e,t,n){const{fragment:r,after_update:a}=e.$$;r&&r.m(t,n),at(()=>{const i=e.$$.on_mount.map(Tt).filter(Yt);e.$$.on_destroy?e.$$.on_destroy.push(...i):L(i),e.$$.on_mount=[]}),a.forEach(at)}function ut(e,t){const n=e.$$;n.fragment!==null&&(ae(n.after_update),L(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function se(e,t){e.$$.dirty[0]===-1&&(C.push(e),ne(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ct(e,t,n,r,a,i,o=null,u=[-1]){const c=B;R(e);const s=e.$$={fragment:null,ctx:[],props:i,update:E,not_equal:a,bound:lt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:lt(),dirty:u,skip_bound:!1,root:t.target||c.$$.root};o&&o(s.root);let f=!1;if(s.ctx=n?n(e,t.props||{},(d,h,...l)=>{const g=l.length?l[0]:h;return s.ctx&&a(s.ctx[d],s.ctx[d]=g)&&(!s.skip_bound&&s.bound[d]&&s.bound[d](g),f&&se(e,d)),h}):[],s.update(),f=!0,L(s.before_update),s.fragment=r?r(s.ctx):!1,t.target){if(t.hydrate){const d=Ut(t.target);s.fragment&&s.fragment.l(d),d.forEach(y)}else s.fragment&&s.fragment.c();t.intro&&j(e.$$.fragment),st(e,t.target,t.anchor),Ft()}R(c)}class ft{constructor(){z(this,"$$");z(this,"$$set")}$destroy(){ut(this,1),this.$destroy=E}$on(t,n){if(!Yt(n))return E;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const a=r.indexOf(n);a!==-1&&r.splice(a,1)}}$set(t){this.$$set&&!Vt(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const ue="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ue);function yt(e){let t;return{c(){t=D("button"),t.textContent="Add weight",P(t,"type","submit")},m(n,r){b(n,t,r)},d(n){n&&y(t)}}}function ce(e){let t,n,r,a,i,o=e[0]&&yt();return{c(){t=D("form"),n=D("input"),r=v(),o&&o.c(),n.autofocus=!0,P(n,"type","text"),P(n,"placeholder","Enter your weight.")},m(u,c){b(u,t,c),M(t,n),mt(n,e[1]),M(t,r),o&&o.m(t,null),n.focus(),a||(i=[nt(n,"input",e[4]),nt(t,"submit",Jt(e[2]))],a=!0)},p(u,[c]){c&2&&n.value!==u[1]&&mt(n,u[1]),u[0]?o||(o=yt(),o.c(),o.m(t,null)):o&&(o.d(1),o=null)},i:E,o:E,d(u){u&&y(t),o&&o.d(),a=!1,L(i)}}}function fe(e,t,n){let{storage:r}=t,{showSubmit:a=!1}=t,i;const o=te();async function u(){const s=parseFloat(i);if(isNaN(s)){alert("Please enter a valid weight.");return}const f=await r.storeWeight(s,new Date);n(1,i=""),o("weightAdded",{weight:f})}function c(){i=this.value,n(1,i)}return e.$$set=s=>{"storage"in s&&n(3,r=s.storage),"showSubmit"in s&&n(0,a=s.showSubmit)},[a,i,u,r,c]}class Ct extends ft{constructor(t){super(),ct(this,t,fe,ce,it,{storage:3,showSubmit:0})}}function bt(e){let t;return{c(){t=D("p"),t.textContent="Weight stored!"},m(n,r){b(n,t,r)},d(n){n&&y(t)}}}function de(e){let t,n,r,a,i,o;r=new Ct({props:{storage:e[0],showSubmit:!0}}),r.$on("weightAdded",e[2]);let u=e[1]&&bt();return{c(){t=D("h1"),t.textContent="Fit Tracker form",n=v(),Nt(r.$$.fragment),a=v(),u&&u.c(),i=Et()},m(c,s){b(c,t,s),b(c,n,s),st(r,c,s),b(c,a,s),u&&u.m(c,s),b(c,i,s),o=!0},p(c,[s]){const f={};s&1&&(f.storage=c[0]),r.$set(f),c[1]?u||(u=bt(),u.c(),u.m(i.parentNode,i)):u&&(u.d(1),u=null)},i(c){o||(j(r.$$.fragment,c),o=!0)},o(c){J(r.$$.fragment,c),o=!1},d(c){c&&(y(t),y(n),y(a),y(i)),ut(r,c),u&&u.d(c)}}}function le(e,t,n){let r=!1,{storage:a}=t;function i(){n(1,r=!0)}return e.$$set=o=>{"storage"in o&&n(0,a=o.storage)},[a,r,i]}class he extends ft{constructor(t){super(),ct(this,t,le,de,it,{storage:0})}}function me(){const e=config.modules.find(r=>r.module==="tt-mmm-fit-tracker"),t=document.querySelector("#app");if(!t){console.log("Unable to find Magic Mirror Fit Tracker app container.");return}if(!e){t.innerHTML="Unable to find Magic Mirror storage configuration.";return}const n=St(e.config);new he({target:t,props:{storage:n}})}async function _t(e){return await e.getWeight()}function p(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof t=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function W(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function ge(e,t){const n=p(e);return isNaN(t)?W(e,NaN):(t&&n.setDate(n.getDate()+t),n)}function we(e,t){const n=p(e);if(isNaN(t))return W(e,NaN);if(!t)return n;const r=n.getDate(),a=W(e,n.getTime());a.setMonth(n.getMonth()+t+1,0);const i=a.getDate();return r>=i?a:(n.setFullYear(a.getFullYear(),a.getMonth(),r),n)}function ye(e,t){const{years:n=0,months:r=0,weeks:a=0,days:i=0,hours:o=0,minutes:u=0,seconds:c=0}=t,s=p(e),f=r||n?we(s,r+n*12):s,d=i||a?ge(f,i+a*7):f,h=u+o*60,g=(c+h*60)*1e3;return W(e,d.getTime()+g)}const At=6048e5,be=864e5;let _e={};function Q(){return _e}function X(e,t){var u,c,s,f;const n=Q(),r=(t==null?void 0:t.weekStartsOn)??((c=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((f=(s=n.locale)==null?void 0:s.options)==null?void 0:f.weekStartsOn)??0,a=p(e),i=a.getDay(),o=(i<r?7:0)+i-r;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function U(e){return X(e,{weekStartsOn:1})}function qt(e){const t=p(e),n=t.getFullYear(),r=W(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const a=U(r),i=W(e,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const o=U(i);return t.getTime()>=a.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function pt(e){const t=p(e);return t.setHours(0,0,0,0),t}function kt(e){const t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function jt(e,t){const n=pt(e),r=pt(t),a=n.getTime()-kt(n),i=r.getTime()-kt(r);return Math.round((a-i)/be)}function pe(e){const t=qt(e),n=W(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),U(n)}function ke(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function De(e){if(!ke(e)&&typeof e!="number")return!1;const t=p(e);return!isNaN(Number(t))}function Oe(e){const t=p(e),n=W(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}const Me={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},We=(e,t,n)=>{let r;const a=Me[e];return typeof a=="string"?r=a:t===1?r=a.one:r=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function et(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const Pe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},ve={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},xe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Se={date:et({formats:Pe,defaultWidth:"full"}),time:et({formats:ve,defaultWidth:"full"}),dateTime:et({formats:xe,defaultWidth:"full"})},Te={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Ye=(e,t,n,r)=>Te[e];function I(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let a;if(r==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,u=n!=null&&n.width?String(n.width):o;a=e.formattingValues[u]||e.formattingValues[o]}else{const o=e.defaultWidth,u=n!=null&&n.width?String(n.width):e.defaultWidth;a=e.values[u]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const Ee={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Fe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Ne={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Ce={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Ae={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},qe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},je=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Le={ordinalNumber:je,era:I({values:Ee,defaultWidth:"wide"}),quarter:I({values:Fe,defaultWidth:"wide",argumentCallback:e=>e-1}),month:I({values:Ne,defaultWidth:"wide"}),day:I({values:Ce,defaultWidth:"wide"}),dayPeriod:I({values:Ae,defaultWidth:"wide",formattingValues:qe,defaultFormattingWidth:"wide"})};function H(e){return(t,n={})=>{const r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const o=i[0],u=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(u)?He(u,d=>d.test(o)):Ie(u,d=>d.test(o));let s;s=e.valueCallback?e.valueCallback(c):c,s=n.valueCallback?n.valueCallback(s):s;const f=t.slice(o.length);return{value:s,rest:f}}}function Ie(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function He(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function Re(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const a=r[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const u=t.slice(a.length);return{value:o,rest:u}}}const Be=/^(\d+)(th|st|nd|rd)?/i,Xe=/\d+/i,Qe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Ge={any:[/^b/i,/^(a|c)/i]},$e={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Ve={any:[/1/i,/2/i,/3/i,/4/i]},Je={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Ue={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},ze={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Ke={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Ze={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},tn={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},en={ordinalNumber:Re({matchPattern:Be,parsePattern:Xe,valueCallback:e=>parseInt(e,10)}),era:H({matchPatterns:Qe,defaultMatchWidth:"wide",parsePatterns:Ge,defaultParseWidth:"any"}),quarter:H({matchPatterns:$e,defaultMatchWidth:"wide",parsePatterns:Ve,defaultParseWidth:"any",valueCallback:e=>e+1}),month:H({matchPatterns:Je,defaultMatchWidth:"wide",parsePatterns:Ue,defaultParseWidth:"any"}),day:H({matchPatterns:ze,defaultMatchWidth:"wide",parsePatterns:Ke,defaultParseWidth:"any"}),dayPeriod:H({matchPatterns:Ze,defaultMatchWidth:"any",parsePatterns:tn,defaultParseWidth:"any"})},Lt={code:"en-US",formatDistance:We,formatLong:Se,formatRelative:Ye,localize:Le,match:en,options:{weekStartsOn:0,firstWeekContainsDate:1}};function nn(e){const t=p(e);return jt(t,Oe(t))+1}function rn(e){const t=p(e),n=U(t).getTime()-pe(t).getTime();return Math.round(n/At)+1}function It(e,t){var f,d,h,l;const n=p(e),r=n.getFullYear(),a=Q(),i=(t==null?void 0:t.firstWeekContainsDate)??((d=(f=t==null?void 0:t.locale)==null?void 0:f.options)==null?void 0:d.firstWeekContainsDate)??a.firstWeekContainsDate??((l=(h=a.locale)==null?void 0:h.options)==null?void 0:l.firstWeekContainsDate)??1,o=W(e,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const u=X(o,t),c=W(e,0);c.setFullYear(r,0,i),c.setHours(0,0,0,0);const s=X(c,t);return n.getTime()>=u.getTime()?r+1:n.getTime()>=s.getTime()?r:r-1}function an(e,t){var u,c,s,f;const n=Q(),r=(t==null?void 0:t.firstWeekContainsDate)??((c=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(s=n.locale)==null?void 0:s.options)==null?void 0:f.firstWeekContainsDate)??1,a=It(e,t),i=W(e,0);return i.setFullYear(a,0,r),i.setHours(0,0,0,0),X(i,t)}function on(e,t){const n=p(e),r=X(n,t).getTime()-an(n,t).getTime();return Math.round(r/At)+1}function m(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const S={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return m(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):m(n+1,2)},d(e,t){return m(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return m(e.getHours()%12||12,t.length)},H(e,t){return m(e.getHours(),t.length)},m(e,t){return m(e.getMinutes(),t.length)},s(e,t){return m(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),a=Math.floor(r*Math.pow(10,n-3));return m(a,t.length)}},N={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},sn={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return S.y(e,t)},Y:function(e,t,n,r){const a=It(e,r),i=a>0?a:1-a;if(t==="YY"){const o=i%100;return m(o,2)}return t==="Yo"?n.ordinalNumber(i,{unit:"year"}):m(i,t.length)},R:function(e,t){const n=qt(e);return m(n,t.length)},u:function(e,t){const n=e.getFullYear();return m(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return m(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return m(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return S.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return m(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const a=on(e,r);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):m(a,t.length)},I:function(e,t,n){const r=rn(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):m(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):S.d(e,t)},D:function(e,t,n){const r=nn(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):m(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return m(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return m(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),a=r===0?7:r;switch(t){case"i":return String(a);case"ii":return m(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let a;switch(r===12?a=N.noon:r===0?a=N.midnight:a=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let a;switch(r>=17?a=N.evening:r>=12?a=N.afternoon:r>=4?a=N.morning:a=N.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return S.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):S.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):m(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):m(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):S.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):S.s(e,t)},S:function(e,t){return S.S(e,t)},X:function(e,t,n,r){const i=(r._originalDate||e).getTimezoneOffset();if(i===0)return"Z";switch(t){case"X":return Ot(i);case"XXXX":case"XX":return T(i);case"XXXXX":case"XXX":default:return T(i,":")}},x:function(e,t,n,r){const i=(r._originalDate||e).getTimezoneOffset();switch(t){case"x":return Ot(i);case"xxxx":case"xx":return T(i);case"xxxxx":case"xxx":default:return T(i,":")}},O:function(e,t,n,r){const i=(r._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Dt(i,":");case"OOOO":default:return"GMT"+T(i,":")}},z:function(e,t,n,r){const i=(r._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Dt(i,":");case"zzzz":default:return"GMT"+T(i,":")}},t:function(e,t,n,r){const a=r._originalDate||e,i=Math.floor(a.getTime()/1e3);return m(i,t.length)},T:function(e,t,n,r){const i=(r._originalDate||e).getTime();return m(i,t.length)}};function Dt(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=Math.floor(r/60),i=r%60;return i===0?n+String(a):n+String(a)+t+m(i,2)}function Ot(e,t){return e%60===0?(e>0?"-":"+")+m(Math.abs(e)/60,2):T(e,t)}function T(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=m(Math.floor(r/60),2),i=m(r%60,2);return n+a+t+i}const Mt=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Ht=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},un=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return Mt(e,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",Mt(r,t)).replace("{{time}}",Ht(a,t))},cn={p:Ht,P:un},fn=["D","DD"],dn=["YY","YYYY"];function ln(e){return fn.indexOf(e)!==-1}function hn(e){return dn.indexOf(e)!==-1}function Wt(e,t,n){if(e==="YYYY")throw new RangeError(`Use \`yyyy\` instead of \`YYYY\` (in \`${t}\`) for formatting years to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`);if(e==="YY")throw new RangeError(`Use \`yy\` instead of \`YY\` (in \`${t}\`) for formatting years to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`);if(e==="D")throw new RangeError(`Use \`d\` instead of \`D\` (in \`${t}\`) for formatting days of the month to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`);if(e==="DD")throw new RangeError(`Use \`dd\` instead of \`DD\` (in \`${t}\`) for formatting days of the month to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`)}const mn=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,gn=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,wn=/^'([^]*?)'?$/,yn=/''/g,bn=/[a-zA-Z]/;function _n(e,t,n){var f,d,h,l,g,_,O,w;const r=Q(),a=(n==null?void 0:n.locale)??r.locale??Lt,i=(n==null?void 0:n.firstWeekContainsDate)??((d=(f=n==null?void 0:n.locale)==null?void 0:f.options)==null?void 0:d.firstWeekContainsDate)??r.firstWeekContainsDate??((l=(h=r.locale)==null?void 0:h.options)==null?void 0:l.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((_=(g=n==null?void 0:n.locale)==null?void 0:g.options)==null?void 0:_.weekStartsOn)??r.weekStartsOn??((w=(O=r.locale)==null?void 0:O.options)==null?void 0:w.weekStartsOn)??0,u=p(e);if(!De(u))throw new RangeError("Invalid time value");const c={firstWeekContainsDate:i,weekStartsOn:o,locale:a,_originalDate:u};return t.match(gn).map(function(k){const x=k[0];if(x==="p"||x==="P"){const G=cn[x];return G(k,a.formatLong)}return k}).join("").match(mn).map(function(k){if(k==="''")return"'";const x=k[0];if(x==="'")return pn(k);const G=sn[x];if(G)return!(n!=null&&n.useAdditionalWeekYearTokens)&&hn(k)&&Wt(k,t,String(e)),!(n!=null&&n.useAdditionalDayOfYearTokens)&&ln(k)&&Wt(k,t,String(e)),G(u,k,a.localize,c);if(x.match(bn))throw new RangeError("Format string contains an unescaped latin alphabet character `"+x+"`");return k}).join("")}function pn(e){const t=e.match(wn);return t?t[1].replace(yn,"'"):e}function Pt(e,t,n){var d,h,l,g;const r=p(e),a=p(t),i=Q(),o=(n==null?void 0:n.locale)??i.locale??Lt,u=(n==null?void 0:n.weekStartsOn)??((h=(d=n==null?void 0:n.locale)==null?void 0:d.options)==null?void 0:h.weekStartsOn)??i.weekStartsOn??((g=(l=i.locale)==null?void 0:l.options)==null?void 0:g.weekStartsOn)??0,c=jt(r,a);if(isNaN(c))throw new RangeError("Invalid time value");let s;c<-6?s="other":c<-1?s="lastWeek":c<0?s="yesterday":c<1?s="today":c<2?s="tomorrow":c<7?s="nextWeek":s="other";const f=o.formatRelative(s,r,a,{locale:o,weekStartsOn:u});return _n(r,f,{locale:o,weekStartsOn:u})}function kn(e){let t,n,r=e[2].weight.toLocaleString(void 0,{maximumFractionDigits:1})+"",a,i,o,u,c,s,f,d=Pt(e[2].when,new Date)+"",h,l,g;return{c(){t=D("p"),n=A("Weight: "),a=A(r),i=v(),o=A(e[1]),u=v(),c=D("br"),s=v(),f=D("span"),h=A(d),P(f,"class","smallest svelte-1ktuyvj"),P(f,"title",l=e[2].when.toLocaleString()),P(t,"class",g=ht(e[5]?"alert":"")+" svelte-1ktuyvj")},m(_,O){b(_,t,O),M(t,n),M(t,a),M(t,i),M(t,o),M(t,u),M(t,c),M(t,s),M(t,f),M(f,h)},p(_,O){O&4&&r!==(r=_[2].weight.toLocaleString(void 0,{maximumFractionDigits:1})+"")&&Z(a,r),O&2&&Z(o,_[1]),O&4&&d!==(d=Pt(_[2].when,new Date)+"")&&Z(h,d),O&4&&l!==(l=_[2].when.toLocaleString())&&P(f,"title",l),O&32&&g!==(g=ht(_[5]?"alert":"")+" svelte-1ktuyvj")&&P(t,"class",g)},d(_){_&&y(t)}}}function Dn(e){let t,n,r;return{c(){t=D("p"),t.textContent="There is no weight available.",n=v(),r=D("p"),r.textContent="Click to enter your weight.",P(r,"class","small svelte-1ktuyvj")},m(a,i){b(a,t,i),b(a,n,i),b(a,r,i)},p:E,d(a){a&&(y(t),y(n),y(r))}}}function On(e){let t;return{c(){t=D("p"),t.textContent="Fetching weight..."},m(n,r){b(n,t,r)},p:E,d(n){n&&y(t)}}}function vt(e){let t;return{c(){t=D("p"),t.textContent="There was an error fetching the weight.",P(t,"class","small svelte-1ktuyvj")},m(n,r){b(n,t,r)},d(n){n&&y(t)}}}function xt(e){let t,n;return t=new Ct({props:{storage:e[0]}}),t.$on("weightAdded",e[6]),{c(){Nt(t.$$.fragment)},m(r,a){st(t,r,a),n=!0},p(r,a){const i={};a&1&&(i.storage=r[0]),t.$set(i)},i(r){n||(j(t.$$.fragment,r),n=!0)},o(r){J(t.$$.fragment,r),n=!1},d(r){ut(t,r)}}}function Mn(e){let t,n,r,a,i,o,u;function c(l,g){return l[2]===void 0?On:l[2]===null?Dn:kn}let s=c(e),f=s(e),d=e[3]&&vt(),h=e[4]&&xt(e);return{c(){t=D("div"),f.c(),n=v(),d&&d.c(),r=v(),h&&h.c(),a=Et()},m(l,g){b(l,t,g),f.m(t,null),M(t,n),d&&d.m(t,null),b(l,r,g),h&&h.m(l,g),b(l,a,g),i=!0,o||(u=nt(t,"click",e[10]),o=!0)},p(l,[g]){s===(s=c(l))&&f?f.p(l,g):(f.d(1),f=s(l),f&&(f.c(),f.m(t,n))),l[3]?d||(d=vt(),d.c(),d.m(t,null)):d&&(d.d(1),d=null),l[4]?h?(h.p(l,g),g&16&&j(h,1)):(h=xt(l),h.c(),j(h,1),h.m(a.parentNode,a)):h&&(ie(),J(h,1,1,()=>{h=null}),oe())},i(l){i||(j(h),i=!0)},o(l){J(h),i=!1},d(l){l&&(y(t),y(r),y(a)),f.d(),d&&d.d(),h&&h.d(l),o=!1,u()}}}function Wn(e,t,n){let{storage:r}=t,{notifier:a}=t,{updateInterval:i=6e5}=t,{unit:o="kg"}=t,{maxWeightAge:u=24*60}=t,c,s,f,d=!1,h=!1,l=!1;async function g(w){h||ye(w.when,{minutes:u})>new Date||(n(5,h=!0),l||(l=!0,await a.notify("Fit Tracker: Your weight is outdated.","Please weigh yourself and enter a new weight.")))}Kt(()=>{c=window.setInterval(()=>{_t(r).then(w=>{n(2,s=w),n(3,f=!1),w!==null&&g(w)}).catch(()=>n(3,f=!0))},i),_t(r).then(w=>{n(2,s=w),n(3,f=!1),w!==null&&g(w)}).catch(()=>n(3,f=!0))}),Zt(()=>{clearInterval(c)});function _(w){n(2,s=w.detail.weight),n(4,d=!1)}const O=()=>n(4,d=!d);return e.$$set=w=>{"storage"in w&&n(0,r=w.storage),"notifier"in w&&n(7,a=w.notifier),"updateInterval"in w&&n(8,i=w.updateInterval),"unit"in w&&n(1,o=w.unit),"maxWeightAge"in w&&n(9,u=w.maxWeightAge)},[r,o,s,f,d,h,_,a,i,u,O]}class Pn extends ft{constructor(t){super(),ct(this,t,Wn,Mn,it,{storage:0,notifier:7,updateInterval:8,unit:1,maxWeightAge:9})}}const vn=(e,t,n)=>{var i;const r=St(t),a={notify:async(o,u)=>{t.pushBullet&&n("NOTIFY",{title:o,message:u,pushBullet:t.pushBullet})}};new Pn({target:e,props:{storage:r,notifier:a,maxWeightAge:((i=t.weight)==null?void 0:i.maxAge)??24*60,...t}})};window.mmmFitTracker={initialize:vn};window.location.pathname==="/fit-tracker"&&me();
//# sourceMappingURL=mmm-fit-tracker.js.map
